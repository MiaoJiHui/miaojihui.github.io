<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Javascript正则表达式小记 · MiaoJiHui</title><meta name="description" content="Javascript正则表达式小记 - Joseph Miao"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/xly.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="http://fonts.useso.com/css?family=Source+Sans+Pro:400,600" type="text/css"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/xly.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/miaojihui" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="https://twitter.com/miaojihui93" target="_blank" class="nav-list-link">TWITTER</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">Javascript正则表达式小记</h1><div class="post-info">Feb 14, 2017</div><div class="post-content"><p>最近在开发微信小程序，因为小程序它不支持html，所以原来的<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">先简单介绍下，正则在js中是有一个内置对象的</span><br></pre></td></tr></table></figure></p>
<p>// 创建RegExp对象的语法<br>var reg = new RegExp(“Helloworld”,”g”);</p>
<p>// 直接量语法，推荐<br>var reg = /Helloworld/g;<br><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">这里的RegExp对象接受两个参数，第一个参数是一个字符串指定了正则表达式，第二个则是修饰符，包含属性 <span class="string">"g"</span>、<span class="string">"i"</span> 和 <span class="string">"m"</span>，分别用于指定全局匹配、区分大小写的匹配和多行匹配。</span><br><span class="line">RegExp有两个常用的方法，<span class="keyword">test</span>()和exec()。使用方式如下：</span><br><span class="line"></span><br><span class="line">``` javascript</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">"Helloworld"</span>;</span><br><span class="line">console.<span class="built_in">log</span>(<span class="keyword">reg</span>.<span class="keyword">test</span>(str));  <span class="comment">// true, 返回是否成功匹配</span></span><br><span class="line">console.<span class="built_in">log</span>(<span class="keyword">reg</span>.exec(str)); <span class="comment">// ["Helloworld", index: 0, input: "Helloworld"], 检索字符串中指定的值。返回找到的值，并确定其位置。</span></span><br></pre></td></tr></table></figure></p>
<p>并且RegExp对象支持String对象的四个方法search(),match(),replace(),split()。</p>
<p>好了，切入正题。<br>其实写的方法也很简单，在utils.js中写了一个替换字符串的函数如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 处理&amp;amp;等这些html可识别的符号标记</span></span><br><span class="line"><span class="comment">// utils.js</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dealChar</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.replace(<span class="regexp">/&amp;amp;/ig</span>, <span class="string">'&amp;'</span>)</span><br><span class="line">             .replace(<span class="regexp">/&amp;#39;|’|‘/ig</span>, <span class="string">"'"</span>)</span><br><span class="line">             .replace(<span class="regexp">/，/ig</span>, <span class="string">",,,"</span>)</span><br><span class="line">             .replace(<span class="regexp">/“|”|&amp;quot;/ig</span>, <span class="string">'"'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">	dealChar: dealChar</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 在index.js中用call()调用</span></span><br><span class="line"><span class="keyword">var</span> rich_text = utils.dealChar.call(res);	<span class="comment">// res是待处理的字符串</span></span><br></pre></td></tr></table></figure>
<p>这种方法其实不是很好，因为可扩展性和可重用性都太低了，等有时间专门去研究下优化优化！<br>写完发现这篇文章可能还是适合新手，一些玩转js正则的大神估计都不够看～<br>以后遇到js正则的问题，其实去w3school仔细看一遍，8成的问题应该都能解决。那上面已经列举了很多种正则匹配的情况了。</p>
<p><a href="http://www.w3school.com.cn/jsref/jsref_obj_regexp.asp" target="_blank" rel="external">w3school参考</a></p>
</div></article></div></section><footer><div class="paginator"><a href="/2016/11/30/gulp/" class="next">下一篇</a></div><div class="copyright"><p>© 2016 - 2017 <a href="https://miaojihui.github.io">Joseph Miao</a>, unless otherwise noted.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>